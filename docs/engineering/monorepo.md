# Monorepo

## 概念

将多个项目、包或服务统一管理在同一个仓库中，而不是拆分成多个仓库（Polyrepo）。

- 统一版本管理
- 跨项目依赖透明
- 支持共享工具、组件和库


## 优势

1. **统一管理**：统一依赖版本，避免“依赖地狱”
2. **项目协作**：多团队可共享组件和工具
3. **代码复用**：公共模块直接引用，无需发布 npm 包
4. **原子提交**：可一次性更新多个包
5. **统一CI/CD**：构建、测试和发布流程一致

## 劣势

1. **仓库体积**：克隆、拉取、构建成本高
2. **版本管理**：不同包可能有不同发布策略（Fixed vs Independent）
3. **构建性能**：构建所有项目慢，需要增量构建策略
4. **权限管理**：所有人可访问所有代码，不利于安全隔离

## 构建

1. **构建优化**

   * **增量构建**：只构建受影响模块
   * **缓存 & 并行**：Nx、Turborepo 提供构建缓存和任务并行执行

2. **依赖关系管理**

   * 跨包引用本地包而非 npm 发布
   * 使用依赖图（Dependency Graph）可视化依赖关系

3. **CI/CD 流程**

   * 受影响模块构建 + 自动化测试
   * 支持单包发布或全量发布策略
