# RAG

## 概述

RAG（Retrieval-Augmented Generation） 是一种结合了信息检索和文本生成的技术架构。它的核心思想是：
1. 检索阶段：当用户提出问题时，系统首先从知识库中检索相关的文档片段
2. 增强阶段：将检索到的相关信息与用户问题一起输入给语言模型
3. 生成阶段：语言模型基于检索到的信息和问题生成回答

## 对比

| 维度 |	RAG |	模型微调 |
| --- | --- | --- |
| 数据更新 |	实时更新知识库，无需重新训练|	需要重新训练整个模型 |
| 成本 |	相对较低，主要是检索成本|	较高，需要大量计算资源 |
| 灵活性	| 可以轻松添加新知识	| 添加新知识需要重新训练 |
| 准确性	| 基于最新检索信息，准确性较高	| 依赖训练时的数据，可能过时 |
| 实现复杂度 |	中等，需要构建检索系统	| 较高，需要处理训练流程 |
| 资源需求	| 需要向量数据库和检索系统	| 需要大量GPU和训练数据 |
| 知识范围	| 可以处理超出训练数据范围的知识	| 局限于训练数据|
| 实时性	| 可以实时更新知识	| 更新周期长 |

## RAG架构组件

1. **文档存储**：存储原始文档
2. **向量数据库**：存储文档的向量表示
3. **检索器**：根据查询检索相关文档
4. **生成器**：基于检索结果生成回答
5. **重排序器**（可选）：对检索结果进行重新排序

## 实现流程

1. **文档预处理**：将文档分块并向量化
2. **查询处理**：将用户查询向量化
3. **相似性检索**：在向量数据库中查找相似文档
4. **上下文构建**：将检索到的文档作为上下文
5. **生成回答**：基于上下文和查询生成最终回答

## 技术挑战

1. **检索质量**：如何准确检索到相关文档
2. **上下文长度**：如何在有限的上下文长度内包含足够信息
3. **文档分块**：如何合理分割文档以保持语义完整性
4. **重排序**：如何对检索结果进行有效排序
5. **混合检索**：结合关键词检索和语义检索